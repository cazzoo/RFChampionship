{#  //RF//Championship is a multi-racing game team manager that allows members to organize and follow championships.
    Copyright (C) 2014 - //Racing-France//

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>. #}

{% set canEdit = is_granted('ROLE_MANAGER') or is_granted('ROLE_CERTIFIED_MANAGER') %}

{% if metaRuleId is defined and metaRuleId is null %}
    Aucune MetaRule sélectionné. Veuillez sélectionner une MetaRule.
{% else %}
    {% if rules %}
        <table class="ui stripped table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Value</th>
                    <th>Description</th>
                        {% if canEdit %}
                        <th>Actions</th>
                        {% endif %}
                </tr>
            </thead>
            <tbody>
                {% set typeSession = '' %}
                {% for rule in rules %}
                    {% if rule.typeSession != typeSession %}
                        {% set typeSession = rule.typeSession %}
                        <tr class="info">
                            <td colspan="{{ canEdit ? 4 : 3 }}">
                                <strong>
                                    {{ typeSession }}
                                </strong>
                            </td>
                        </tr>
                    {% endif %}
                    <tr>
                        <td>
                            {{ rule.name }}
                        </td>
                        <td>
                            {{ rule.value }}
                        </td>
                        <td>
                            {{ rule.description }}
                        </td>
                        {% if canEdit %}
                            <td>
                                <a class="ui mini icon blue button" href="{{ path('admin_rule_edit', {'ruleId' : rule.id, 'gameId' : rule.game.id}) }}"><i class="edit icon"></i></a>
                                <a class="ui mini icon red button" href="{{ path('admin_rule_delete', {'ruleId' : rule.id, 'gameId' : rule.game.id}) }}"><i class="delete icon"></i></a>
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        Rien a afficher
    {% endif %}
{% endif %}