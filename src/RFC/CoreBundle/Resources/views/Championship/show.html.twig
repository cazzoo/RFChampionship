{# src/RFC/CoreBundle/Resources/views/Core/gameIndex.html.twig #}

{% extends "RFCCoreBundle::layout.html.twig" %}

{% block rfccore_body %}

<div class="row">
	<h1>{{ entity.name }}</h1>

	<dl class="dl-horizontal">
		<dt>Description</dt>
		<dd>
			{% if entity.description %}{{ entity.description }}{% else %}<i>Aucune
				description</i>{% endif %}
		</dd>
		<dt>Championnat Agrée?</dt>
		<dd>{% if entity.isAgreed %}True{% else %}False{% endif %}</dd>
		<dt>MetaRule</dt>
		<dd>
			{% if entity.metaRule %}{{ entity.metaRule.name }}{% else %}<i>Aucune
				metaRule</i>{% endif %}
		</dd>
		<dt>Organisateurs</dt>
		<dd>
			{% if entity.metaRule %}
			<ul>
				{% for manager in entity.listManagers %}
				<li>{{ manager.username }}</li> {% endfor %}
			</ul>
			{% else %}<i>Aucun organisateur(s) défini(s)</i>{% endif %}
		</dd>
	</dl>
</div>
<hr />
<div class="row">
	{# Liste les événements et les sessions #}
	<div class="col-md-5">
		<div class="list-group">
			<h3>
				Events
			</h3>
			{% if entity.listEvents is empty %} Aucun Event n'est présent. Il
			faut en créer. {% else %}
			<ul>{% for event in entity.listEvents %}
			</ul>
			<div class="row">
				{# Colonne 1 : Events #}
				<a
					id="event_{{ event.id }};game_{{ game.id }};championship_{{ entity.id }}"
					href="#event_{{ event.id }}" class="eventItem list-group-item">
					<h4 class="list-group-item-heading">{{ event.name }}</h4>
					<p class="list-group-item-text">
					
					<div>{{ event.description }}</div>
					<div>
						<small><span class="label label-primary">{{
								event.beginDate|date("Y/m/d H:i") }}</span> > <span
							class="label label-primary">{{ event.endDate|date("Y/m/d H:i")
								}}</span></small>
					</div>
					</p>
				</a>
			</div>
			{% endfor %}
		</div>
	</div>
	<div class="col-md-7">
		<h3>Sessions</h3>
		{# Colonne 2 : Sessions #}
		<ul class="list-group" id="listSessions">
		</ul>
	</div>
	{% endif %}
</div>
<hr />
<div>
	<h1>
		Rules
	</h1>
	<div class="list-group">
		{% if entity.isAgreed %} {% set rules = entity.metaRule.listRules %}
		{% else %} {% set rules = entity.listRules %} {% endif %} {% for rule
		in rules %}
		<div class="row">
			<a href="#" class="list-group-item">
				<h4 class="list-group-item-heading">{{ rule.name }}</h4>
				<p class="list-group-item-text">{{ rule.value }}</p>
			</a>
		</div>
		{% endfor %}
	</div>
</div>

<div>
    <h1>
        Participants
    </h1>
    
    <div id="registrationStatus">
        {% include 'RFCCoreBundle:Championship:championshipRegistration.html.twig' with {'gameId' : game.id, 'championshipId' : entity.id} %}
    </div>
    
    {% for participant in entity.listUsers %}
        {{ participant.username }}
    {% endfor %}
</div>

{% endblock %}
